# T2_CMKE_2025W
Topic 2 RBS&amp;FOL in Smart Mobility Concept CMKE_2025W

Project Summary – Smart Mobility Decision System (Java + Drools + FOL)

The system recommends the most suitable transportation method within a smart-mobility context (e.g., walking, biking, public transport).

Core technologies: Java backend, Drools (DRL files) for rule-based reasoning, and JPL (Java-Prolog bridge) for first-order logic evaluation.

Frontend: simple HTML/CSS/JavaScript interface for collecting user input.

Required user inputs include:
weather conditions (manually entered)
approximate route length (in meters or kilometers)
ecological sustainability preference
preferred transport modes
ticket or transportation option ownership
transport modes the user wants to avoid

External real data sources: Wiener Linien Routing Service (public, no API key required) used as the single real API.

All other data (weather, bike availability, etc.) is randomly simulated through static JSON or XML files.

Workflow:

1. Frontend gathers user input and sends JSON or XML to the Java backend.
2. Java backend optionally queries the Wiener Linien routing API for simple route/line information.
3. Backend assembles a complete "input JSON/XML" containing user preferences, route length, weather, and routing data.
4. First-order logic module (via JPL) computes environmental or logical factors.
5. Drools receives all facts and applies rule-based reasoning to select the recommended transportation method.
6. The system returns an “output JSON/XML" containing the final transport recommendation.

Architecture is stateless (no database).

Testing can be done by sending fake JSON/XML requests directly to the backend (via Podman or curl) without the UI.

How to run the project in the implementation phase:

1. The project runs on java 17 and uses Maven.
2. Simply download from github via git/github desktop
3. If needed run Maven clean, compile, install.
4. Open the project and start "RecommendationEngineApplication".
5. Open http://localhost:8080/ to use the frontend.
6. Submit user preferences via the frontend with the push of "Submit preferences" button
7. Check console for the result.

How everything works right now and what needs to be done:
1. The front end uses fixed user positional coordinates right now since i was not in vienna at the time of implementation
2. The front end gathers the possible stations to visit via the haltestellen.csv file
3. The front end calculates the possible bike sharing services via the .json files in the resources folder.
4. The bike sharing and wiener linien logic is contained in their own service class in the service folder where the needed distances and best/closest stations are calculated.
5. JPL is loaded on startup via the JPLLoader class.
6. The environmental score calculation needs to be done in "environmental_score.pl" file
7. The drools rules need to be located in the rules.drl file
8. The KIE Session for drools needs to be implemented in the Drools Config
9. For decision-making drools will use the Fact.java class which will consist of the user preferences and context gathered/generated by the front end and recommendation controller

Application workflow (check out the "RecommendationResponseDTO recommend" Method inside the RecommendationController.java class!):
1. Start the frontend on localhost
2. Set ur user preferences
3. Choose your destination
4. Press submit preferences
5. The frontend sends everything to the recommendation controller to our post mapping "/recommend" as an UserPreferencesDTO and calculates the distance in meteres to the destination.
6. This controller then fetches the public transport modes by calling the Wiener linien API with the user coordinates and destination coordinates. The API answer consists of the best route to reach the destination and which kind of public transport is used.
7. The controller then reads the best form of transport from the API answer. For this we use the "HaltestellenService.java" class.
8. After that the controller calculates the closest bike station, available bikes and distance to bike station. For this we use the "BikeSharingService.java" class.
9. The controller builds the base context fact (ContextDTO) based on all the gathered information. In the "buildbasecontext" method the environmental factor is calculated using JPL.
10. Then we run drools in the runDrools method and make our decision and return it as a RecommendationResponseDTO which is then sent back to the front end and presented to the user.

Note:
Check out the UserPreferencesDTO and ContextDTO to see what kind of data we use to make our decision in drools or calculate the environmental factor with!
UserPreferencesDTO consists of the data given to us by the user himself.
ContextDTO consists of the data calculated based on the user data (e.g. environmental factor, public transport modes, distances, bikesharing)
RecommendationResponseDTO consists of data that will be generated by drools & sent back to the frontend and presented to the user!

What needs to be done:

1. Implement environmental factor calculation via jpl in "environmental_score.pl" called from the controller in the "private ContextDTO buildBaseContext" method.
2. Implement drools rules and reasoning logic via KIE session in "rules.drl" and "DroolsConfig.java". Use the Fact.java class for our DroolsFact(consists of context/preferences DTO). See the RecommendationResponseDTO to check which data needs to be given back to the user in the response.
